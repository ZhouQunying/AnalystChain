# Pipelineæµ‹è¯•æŒ‡å—

## ğŸ¯ æµ‹è¯•ç›®æ ‡

éªŒè¯çŸ¥è¯†å¤„ç†Pipelineçš„5ä¸ªæ ¸å¿ƒæ¨¡å—æ˜¯å¦æ­£å¸¸å·¥ä½œã€‚

## ğŸ“‹ æµ‹è¯•æ­¥éª¤

### 1. å¯åŠ¨Jupyter Notebook

```bash
# æ¿€æ´»condaç¯å¢ƒ
conda activate analyst_chain

# è¿›å…¥notebookç›®å½•
cd /Users/Qunying/Project/python/AnalystChain/jupyter_notebook/macroeconomic_analysis/notebooks

# å¯åŠ¨Jupyter  
jupyter notebook
```

### 2. æ‰“å¼€Notebook

æ‰“å¼€ `knowledge_processing_pipeline.ipynb`

### 3. æ‰§è¡Œæµ‹è¯•

**æŒ‰é¡ºåºè¿è¡Œä»¥ä¸‹Cellï¼š**

1. **Cell 0**: æ ‡é¢˜å’Œæµç¨‹å›¾ âœ…  
2. **Cell 1**: å¯¼å…¥ä¾èµ– âœ…  
3. **Cell 2-3**: é…ç½®å‚æ•° âœ…  
4. **Cell 4-5**: æ•°æ®ç»“æ„å®šä¹‰ âœ…  
5. **Cell 6-7**: æ¨¡å—1 - KnowledgeOrganizer âœ…  
6. **Cell 8-9**: æ¨¡å—2 - DocumentLoader âœ…  
7. **Cell 10-11**: æ¨¡å—3 - KnowledgeExtractor âœ…  
8. **Cell 12-13**: æ¨¡å—4 - VectorStoreManager âœ…  
9. **Cell 14-15**: æ¨¡å—5 - KnowledgeProcessor âœ…  
10. **Cell 16**: ç©ºcellï¼ˆå¯è·³è¿‡ï¼‰
11. **Cell 17**: åˆå§‹åŒ–Processor ğŸ§ª **â† ä»è¿™é‡Œå¼€å§‹æµ‹è¯•**
12. **Cell 18**: å°è§„æ¨¡æµ‹è¯•ï¼ˆlimit=2ï¼‰ğŸ§ª **â† è¿è¡Œæ­¤cell**

### 4. è§‚å¯Ÿè¾“å‡º

**é¢„æœŸè¾“å‡ºï¼š**

```
âœ… Processoråˆå§‹åŒ–å®Œæˆ
ğŸ“ çŸ¥è¯†åº“: ../knowledge_base
ğŸ“ JSONè¾“å‡º: ./output/structured_knowledge
ğŸ“ å‘é‡åº“: ./output/vector_db

================================================================================
ğŸš€ å¼€å§‹å®Œæ•´Pipeline
================================================================================

ğŸ“š æ‰«æ: ../knowledge_base
æ‰¾åˆ° 51 ä¸ªæ–‡ä»¶
âœ“ 01ç¬¬ä¸€èŠ‚ ä¸­å›½ç»æµçš„"ä¸‰é©¾é©¬è½¦" (3æ–‡ä»¶)
âœ“ 02ç¬¬äºŒèŠ‚ æ¶ˆè´¹â€”â€”å¿«é€Ÿå…¥é—¨è¯»æ‡‚ç»æµå½¢åŠ¿ (3æ–‡ä»¶)
...
âœ… 17 ä¸ªçŸ¥è¯†å—

ğŸ“‚ é¢†åŸŸ: knowledge_base
--------------------------------------------------------------------------------

[1] 01ç¬¬ä¸€èŠ‚ ä¸­å›½ç»æµçš„"ä¸‰é©¾é©¬è½¦"
  â†’ åŠ è½½: X é¡µ
  â†’ JSON: 01ç¬¬ä¸€èŠ‚_ä¸­å›½ç»æµçš„"ä¸‰é©¾é©¬è½¦".json
  â†’ å‘é‡åŒ–: X chunks

[2] 02ç¬¬äºŒèŠ‚ æ¶ˆè´¹â€”â€”å¿«é€Ÿå…¥é—¨è¯»æ‡‚ç»æµå½¢åŠ¿
  â†’ åŠ è½½: X é¡µ
  â†’ JSON: 02ç¬¬äºŒèŠ‚_æ¶ˆè´¹â€”â€”å¿«é€Ÿå…¥é—¨è¯»æ‡‚ç»æµå½¢åŠ¿.json
  â†’ å‘é‡åŒ–: X chunks

â¸ï¸  è¾¾åˆ°é™åˆ¶(2),åœæ­¢

âœ… knowledge_base: å®Œæˆ 2 ä¸ª

================================================================================
ğŸ‰ Pipelineå®Œæˆ!
================================================================================

ğŸ“ è¾“å‡º:
  - JSON: ./output/structured_knowledge
  - å‘é‡åº“: ./output/vector_db
```

### 5. éªŒè¯è¾“å‡º

**æ£€æŸ¥ç”Ÿæˆçš„æ–‡ä»¶ï¼š**

```bash
# æŸ¥çœ‹JSONæ–‡ä»¶
ls -lh output/structured_knowledge/knowledge_base/

# æŸ¥çœ‹å‘é‡æ•°æ®åº“
ls -lh output/vector_db/knowledge_base/

# æŸ¥çœ‹ç¬¬ä¸€ä¸ªJSONæ–‡ä»¶å†…å®¹
cat output/structured_knowledge/knowledge_base/01*.json | head -50
```

**é¢„æœŸç»“æ„ï¼š**

```
output/
â”œâ”€â”€ structured_knowledge/
â”‚   â””â”€â”€ knowledge_base/
â”‚       â”œâ”€â”€ 01ç¬¬ä¸€èŠ‚_ä¸­å›½ç»æµçš„"ä¸‰é©¾é©¬è½¦".json
â”‚       â””â”€â”€ 02ç¬¬äºŒèŠ‚_æ¶ˆè´¹â€”â€”å¿«é€Ÿå…¥é—¨è¯»æ‡‚ç»æµå½¢åŠ¿.json
â””â”€â”€ vector_db/
    â””â”€â”€ knowledge_base/
        â”œâ”€â”€ chroma.sqlite3
        â””â”€â”€ ... (embeddingæ–‡ä»¶)
```

## âœ… æˆåŠŸæ ‡å‡†

1. âœ… æ— æŠ¥é”™ä¿¡æ¯  
2. âœ… ç”Ÿæˆ2ä¸ªJSONæ–‡ä»¶  
3. âœ… ç”Ÿæˆå‘é‡æ•°æ®åº“ç›®å½•  
4. âœ… JSONæ–‡ä»¶åŒ…å«ç»“æ„åŒ–çŸ¥è¯†ï¼ˆtopic, key_concepts, indicatorsç­‰ï¼‰  
5. âœ… å‘é‡æ•°æ®åº“åŒ…å«chroma.sqlite3æ–‡ä»¶

## âš ï¸ å¸¸è§é—®é¢˜

### é—®é¢˜1ï¼šModuleNotFoundError

**åŸå› **: ä¾èµ–æœªå®‰è£…  
**è§£å†³**:
```bash
conda activate analyst_chain
pip install -r ../../../requirements.txt
```

### é—®é¢˜2ï¼šAPI Keyé”™è¯¯

**åŸå› **: DeepSeek API Keyæœªé…ç½®  
**è§£å†³**:
```bash
# æ£€æŸ¥ç¯å¢ƒå˜é‡
cat ../../../config/.env

# ç¡®ä¿åŒ…å«ï¼š
# DEEPSEEK_API_KEY=sk-xxxxx
```

### é—®é¢˜3ï¼šæ¨¡å‹ä¸‹è½½æ…¢

**åŸå› **: HuggingFaceæ¨¡å‹ä¸‹è½½  
**è§£å†³**:
- Qwen3-Embeddingé¦–æ¬¡ä½¿ç”¨ä¼šä¸‹è½½æ¨¡å‹æ–‡ä»¶ï¼ˆ~200MBï¼‰
- è€å¿ƒç­‰å¾…ï¼Œåç»­ä½¿ç”¨ä¼šç¼“å­˜

### é—®é¢˜4ï¼šå†…å­˜ä¸è¶³

**åŸå› **: Embeddingæ¨¡å‹å ç”¨å†…å­˜  
**è§£å†³**:
- å…³é—­å…¶ä»–åº”ç”¨
- æˆ–ä¿®æ”¹CHUNK_SIZEå‡å°‘å†…å­˜å ç”¨

## ğŸ“Š ä¸‹ä¸€æ­¥

æµ‹è¯•æˆåŠŸåï¼Œå¯ä»¥ï¼š

1. **å…¨é‡å¤„ç†**ï¼šè¿è¡ŒCell 19å¤„ç†æ‰€æœ‰51ä¸ªæ–‡ä»¶
2. **æ£€ç´¢éªŒè¯**ï¼šåˆ›å»ºæ£€ç´¢æµ‹è¯•notebook
3. **æ€§èƒ½ä¼˜åŒ–**ï¼šè°ƒæ•´CHUNK_SIZEç­‰å‚æ•°

## ğŸ”— ç›¸å…³æ–‡æ¡£

- [ä¸»ä»»åŠ¡](../../../../docs/tasks/ä¸»ä»»åŠ¡.md)
- [é˜¶æ®µ1æ–‡æ¡£](../../../../docs/tasks/é˜¶æ®µ1_çŸ¥è¯†åŸºç¡€.md)
- [æŠ€æœ¯å†³ç­–](../../../../docs/tasks/æŠ€æœ¯å†³ç­–.md)
- [AIè¡Œä¸ºçº¦æŸè§„èŒƒ](../../../../docs/AIè¡Œä¸ºçº¦æŸè§„èŒƒ.md)

