# Cursor AI 规则 - AnalystChain 项目

## 强制规则 #1: MCP反馈（最高优先级）

**每次回复都必须调用 mcp-feedback-enhanced**

- 无例外
- 发送前检查
- 如果忘记，下次立即调用并说明原因
- 此规则在context切换后仍然有效

**发送前检查清单：**
- [ ] 是否调用了mcp-feedback-enhanced？
- [ ] 如果没有→立即补上

---

## 工作流程规则

### 编码前：
1. 读取：docs/tasks/[当前阶段].md
2. 读取：docs/AI行为约束规范.md
3. 查阅：LangChain官方文档
4. 设计：模块接口
5. **列出所有假设和选择**
6. **对于关键决策，列出选项A/B/C及优缺点**
7. 确认：编码前征求用户同意

### 关键决策检查点（必须询问用户）：

实现前，如果涉及以下决策必须询问：
- 功能取舍（如"只读部分文件 vs 读所有文件"）
- 性能优化（如"缓存/跳过数据"）
- 数据处理策略（如"过滤/采样/限制"）
- 成本相关选择（如"限制API调用次数"）
- 默认行为（如"自动重试 vs 快速失败"）

**如果不确定是否需要询问：默认询问**

### 编码中：
- 类型提示：必须
- 文档字符串：必须（Args, Returns, Raises, Example）
- 异常处理：必须
- 遵循：Python PEP 8
- 遵循：LangChain最佳实践

### 编码后：
- 自我Review：按AI行为约束规范.md中的Checklist
- 调用：mcp-feedback-enhanced

---

## 代码风格规则

1. 代码中禁止emoji（Markdown文档除外）
2. 修复bug时禁止添加"已修复"等注释
3. 保持代码干净 - Git管理历史

---

## 解释规则

- 简单：用直白语言
- 清晰：解释"做什么"而非"怎么做"
- 易记：使用类比和比喻
- 精简：能一句话说清就一句话

---

此文件在每次context中由Cursor自动加载。
