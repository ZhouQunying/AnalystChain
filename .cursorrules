# Cursor AI 快速检查清单 - AnalystChain项目

> **定位**: 快速执行清单,用于每次回复前快速检查
>
> **何时使用**: 每次回复前、编码前后
>
> **详细标准**: 见 `docs/AI行为约束规范.md`(包含示例代码、架构标准、详细说明)

---

## 🚨🚨🚨 强制规则 #0: MCP反馈（最高优先级）🚨🚨🚨

**每次回复都必须调用 mcp-feedback-enhanced**

### 发送前强制检查（必须执行）:
```
第1步: 任务完成了吗? → 是
第2步: 调用 mcp-feedback-enhanced 了吗? → 是
第3步: 发送回复
```

**如果第2步答案是"否" → 立即补上tool call → 再检查 → 再发送**

**此规则在context切换后依然有效！**

---

## 🔴 强制规则（每次回复前检查）

### [ ] 1. 启动检查（每次新对话/Context必做）⭐新增

**用户经常git pull新代码，必须先检查实际状态！**

检查顺序：
1. list_dir项目根目录（确认目录结构）
2. list_dir当前阶段相关目录（确认文件状态）
3. read_file `docs/learning/学习进度.md`（了解学习进度）
4. read_file关键任务文档（确认任务目标）
5. **基于实际状态**制定计划

### [ ] 2. 读取项目文档

编码前必须读取：
- `environment.yml` / `requirements.txt`（确认环境和包管理工具）
- `docs/tasks/[当前阶段].md`（确认任务目标）
- `docs/AI行为约束规范.md`（确认质量标准）

### [ ] 2. 关键决策征求确认
以下决策必须列出选项并询问用户：
- 功能取舍
- 性能优化
- 数据处理策略
- 成本相关
- 默认行为

**不确定是否需要询问：默认询问**

---

## 📝 编码检查清单

### 编码前：
- [ ] 项目环境已确认（conda/uv/pip？）
- [ ] 任务目标已明确（对照tasks文档）
- [ ] **检查实际状态**（不要假设！）：
  - 目录结构（list_dir）
  - 文件内容（read_file/grep）
  - 配置信息
- [ ] LangChain文档已查阅
- [ ] 模块接口已设计
- [ ] **列出所有假设**（不确定的信息）
- [ ] 用户已确认方案

### 编码中：
- [ ] 类型提示（参数、返回值）
- [ ] 文档字符串（Args, Returns, Raises, Example）
- [ ] 异常处理
- [ ] Python PEP 8
- [ ] LangChain最佳实践
- [ ] 无emoji（代码、注释、输出、Jupyter Markdown cell）
- [ ] 无"已修复"注释

### 编码后：
- [ ] 语法检查（.ipynb）：`python scripts/check_notebook_syntax.py <file>`
- [ ] Linter检查（.py）：`python -m pylint <file>`
- [ ] 自我Review（见AI行为约束规范.md）
- [ ] ⭐ **任务完成标准**（说"完成"前必须全部打勾）：
  - [ ] ipynb完整执行通过（生成verified.ipynb）
  - [ ] py导入测试通过
  - [ ] 代码已拆解到src/
  - [ ] 任务文档已更新（checkbox+进度+路径）
- [ ] 所有Checklist已完成
- [ ] 🚨 mcp-feedback-enhanced已调用（必须！）

---

## 🎯 快速口诀

**发送前：** "任务完成 → 调MCP了吗 → 调了 → 发送"
**编码前：** "环境看了吗？任务对了吗？征求了吗？"
**编码中：** "类型、文档、异常、无emoji"
**编码后：** "语法、Lint、Review、MCP"

---

---

## ⚠️ Context切换提醒

**如果需要总结context → 必须在summary第一条写入MCP规则**

详细的Context切换流程见 `docs/AI行为约束规范.md`

---

此文件在每次context中由Cursor自动加载。
